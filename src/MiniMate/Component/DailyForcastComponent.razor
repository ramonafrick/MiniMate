@if (IsLoading)
{
    <div class="forecast-loading">
        <div class="spinner"></div>
        <p>@Localizer["Forecast_LoadingData"]</p>
    </div>
}
else if (ErrorMessage != null)
{
    <div class="forecast-error">
        <div class="error-icon">‚ö†Ô∏è</div>
        <p>@ErrorMessage</p>
    </div>
}
else if (HourlyForecast.Length > 0)
{
    <div class="daily-forecast-container">
        <h2 class="forecast-title">@Localizer["Forecast_24HourTitle"]</h2>

        <div class="forecast-scroll-container">
            <div class="forecast-grid">
                @foreach (var hour in HourlyForecast)
                {
                    var totalRain = GetTotalRain(hour);
                    <div class="forecast-hour-card">
                        <!-- Rain background bar - fills from bottom -->
                        @if (totalRain > 0)
                        {
                            <div class="rain-bar-background" style="height: @GetBarHeight(totalRain, GetMaxRain()); background: @GetRainBarColor(totalRain)"></div>
                        }

                        <!-- Time -->
                        <div class="hour-time">@hour.TimeFormatted</div>

                        <!-- Weather Icon -->
                        <div class="hour-icon">@hour.WeatherIcon</div>

                        <!-- Temperature -->
                        <div class="hour-temp">@hour.TemperatureFormatted</div>

                        <!-- Precipitation Probability -->
                        @if (hour.PrecipitationProbability > 0)
                        {
                            <div class="hour-precip-prob">
                                <span class="precip-icon">üíß</span>
                                <span>@hour.PrecipitationProbability%</span>
                            </div>
                        }
                        else
                        {
                            <div class="hour-precip-prob-placeholder"></div>
                        }

                        <!-- Rain amount text at bottom -->
                        @if (totalRain > 0)
                        {
                            <div class="rain-amount" style="color: @GetRainTextColor(totalRain)">@totalRain.ToString("F1") mm/h</div>
                        }
                    </div>
                }
            </div>
        </div>

        <!-- Rain intensity legend -->
        <div class="rain-legend">
            <div class="legend-title">@Localizer["Forecast_RainIntensity"]</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-bar" style="background: linear-gradient(to top, #b3d9f2, #e6f2fa)"></div>
                    <span class="legend-label">0-1 mm/h</span>
                    <span class="legend-icon">üå¶Ô∏è</span>
                </div>
                <div class="legend-item">
                    <div class="legend-bar" style="background: linear-gradient(to top, #74b9e6, #a3d1ee)"></div>
                    <span class="legend-label">1-3 mm/h</span>
                    <span class="legend-icon">üåßÔ∏è</span>
                </div>
                <div class="legend-item">
                    <div class="legend-bar" style="background: linear-gradient(to top, #4a9fd5, #74b9e6)"></div>
                    <span class="legend-label">3-5 mm/h</span>
                    <span class="legend-icon">üåßÔ∏è</span>
                </div>
                <div class="legend-item">
                    <div class="legend-bar" style="background: linear-gradient(to top, #3498db, #5dade2)"></div>
                    <span class="legend-label">5-7 mm/h</span>
                    <span class="legend-icon">üåßÔ∏èüåßÔ∏è</span>
                </div>
                <div class="legend-item">
                    <div class="legend-bar" style="background: linear-gradient(to top, #2471a3, #4a9fd5)"></div>
                    <span class="legend-label">7+ mm/h</span>
                    <span class="legend-icon">‚õàÔ∏è</span>
                </div>
            </div>
        </div>

        <div class="forecast-summary">
            <div class="summary-item">
                <span class="summary-icon">üå°Ô∏è</span>
                <span class="summary-label">@Localizer["Forecast_MinMax"]</span>
                <span class="summary-value">@GetMinTemperature().ToString("F1")¬∞C / @GetMaxTemperature().ToString("F1")¬∞C</span>
            </div>
            <div class="summary-item">
                <span class="summary-icon">üåßÔ∏è</span>
                <span class="summary-label">@Localizer["Forecast_MaxRain"]</span>
                <span class="summary-value">@GetMaxRain().ToString("F1") mm/h</span>
            </div>
        </div>
    </div>
}
